<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v4</title>
    <script defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCL7_cBFaxTj5l1YcIEAOqVOhkrPtvAOV4&callback=initMap"></script>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 768px;
            margin: 0 auto;
            height: 100%;
        }

        #map {
            height: 100%;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>–ù–∞—à–∏ –ø—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏ –Ω–∞ –∫–∞—Ä—Ç–µ</h1>
        <div id="map"></div>
    </div>

    <script>
        // –ü–ª–∞–Ω —Ä–∞–±–æ—Ç:
        // 1. –°–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏, –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ - –æ–±—ä–µ–∫—Ç —Å –Ω—É–∂–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏: id, address –∏ –ø—Ä–æ—á.
        // 2. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç—ã, –æ–±–æ–π—Ç–∏ –º–∞—Å—Å–∏–≤ –æ—Ñ–∏—Å–æ–≤ –≤ —Ü–∏–∫–ª–µ –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–∑–¥–∞—Ç—å –º–∞—Ä–∫–µ—Ä —Å –∏–Ω—Ñ–æ-–æ–∫–Ω–æ–º –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ –∫–∞—Ä—Ç—É.


        // –ú–∞—Å—Å–∏–≤ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏
        const points = [
            {
                id: 1,
                address: "–ø—Ä. –ö–∏—Ä–æ–≤–∞, –¥. 14, –∫–æ—Ä–ø. 3.",
                imgUrl: "https://loremflickr.com/200/300?random=1",
                lat: 55.711667,
                lng: 37.647778,
            },
            {
                id: 2,
                address: "–ø–ª. –°—Ç–∞–ª–∏–Ω–∞, –¥. 30, –∫–æ—Ä–ø. 16.",
                imgUrl: "https://loremflickr.com/200/300?random=2",
                lat: 55.691667,
                lng: 37.677778,
            },

        ];

        const infoWindows = [];
        const compmanyName = '–ö–æ–∫—Å–±–µ—Ä—Ä–∏';

        let map;

        function initMap() {

            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 55.751667, lng: 37.617778 }, // –ú–æ—Å–∫–≤–∞
                zoom: 11
            });

            // –û–±—Ö–æ–¥–∏–º –º–∞—Å—Å–∏–≤ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π –Ω–∞ –∫–∞—Ä—Ç—É
            points.forEach((point) => {

                const marker = new google.maps.Marker({ position: { lat: point.lat, lng: point.lng }, map: map });

                const content = `<div>
                    <h3>${compmanyName}</h3>
                    <div>
                        <img src="${point.imgUrl}"/>
                        <address>${point.address}</address>
                    </div>
                </div>`;

                const infoWindow = new google.maps.InfoWindow({ content: content });
                infoWindows.push(infoWindow); 

                marker.addListener('click', () => {
                    infoWindows.forEach(infoWindow => infoWindow.close());
                    infoWindow.open(map, marker);
                });
            });

        }

        // –ó–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç—É –∏–∑ –º–∞—Å—Å–∏–≤–∞! üëè
        // –ü–æ—á–∏—Ç–∞—Ç—å –ø—Ä–æ –º–µ—Ç–æ–¥ forEach: https://learn.javascript.ru/array-methods#perebor-foreach
        // TODO: –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞ –∏ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –≥–æ—Ä–æ–¥—É.

    </script>
</body>

</html>