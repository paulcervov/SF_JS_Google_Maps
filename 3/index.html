<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v3</title>
    <script defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCL7_cBFaxTj5l1YcIEAOqVOhkrPtvAOV4&callback=initMap"></script>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 768px;
            margin: 0 auto;
            height: 100%;
        }

        #map {
            height: 100%;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>–ù–∞—à–∏ –ø—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏ –Ω–∞ –∫–∞—Ä—Ç–µ</h1>
        <div id="map"></div>
    </div>

    <script>
        // –ü–ª–∞–Ω —Ä–∞–±–æ—Ç:
        // 1. –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –∏–Ω—Ñ–æ-–æ–∫–æ–Ω –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ, –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∏—Ö –Ω—É–∂–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
        // 2. –ó–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫–∞–∑ –∏–Ω—Ñ–æ-–æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –º–∞—Ä–∫–µ—Ä—É
        // 3. –ó–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –¥—Ä—É–≥–∏—Ö –∏–Ω—Ñ–æ-–æ–∫–æ–Ω.

        // –ú–∞—Å—Å–∏–≤ –∏–Ω—Ñ–æ-–æ–∫–æ–Ω
        const infoWindows = [];

        let map;

        function initMap() {

            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 55.751667, lng: 37.617778 }, // –ú–æ—Å–∫–≤–∞
                zoom: 11
            });

            const marker = new google.maps.Marker({ position: { lat: 55.711667, lng: 37.647778 }, map: map });

            // –†–∞–∑–º–µ—Ç–∫–∞ –∏–Ω—Ñ–æ-–æ–∫–Ω–∞
            const content = `<div>
                <h3>–ö–æ–∫—Å–±–µ—Ä—Ä–∏</h3>
                <div>
                    <img src="https://loremflickr.com/200/300?random=1"/>
                    <address>–ø—Ä. –ö–∏—Ä–æ–≤–∞, –¥. 14, –∫–æ—Ä–ø. 3.</address>
                </div>
            </div>`;

            // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏–Ω—Ñ–æ-–æ–∫–Ω–∞, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –≤ –º–∞—Å—Å–∏–≤
            const infoWindow = new google.maps.InfoWindow({ content: content });
            infoWindows.push(infoWindow); 

            // –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º –ø–æ–∫–∞–∑ –∏–Ω—Ñ–æ-–æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –º–∞—Ä–∫–µ—Ä
            marker.addListener('click', () => {

                // –∑–∞–∫—Ä—ã–≤–∞–µ–º –¥—Ä—É–≥–∏–µ –∏—Ñ–æ-–æ–∫–Ω–∞
                infoWindows.forEach(infoWindow => infoWindow.close());

                //–û—Ç–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ
                infoWindow.open(map, marker);
            });

            // –¢–µ–ø–µ—Ä—å –≤—Å–µ —Ç–æ–∂–µ —Å–∞–º–æ–µ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
            const marker2 = new google.maps.Marker({ position: { lat: 55.691667, lng: 37.677778 }, map: map });
            
            const content2 = `<div>
                <h3>–ö–æ–∫—Å–±–µ—Ä—Ä–∏</h3>
                <div>
                    <img src="https://loremflickr.com/200/300?random=2"/>
                    <address>–ø–ª. –°—Ç–∞–ª–∏–Ω–∞, –¥. 30, –∫–æ—Ä–ø. 16.</address>
                </div>
            </div>`;

            const infoWindow2 = new google.maps.InfoWindow({ content: content2 });
            infoWindows.push(infoWindow2); 

            marker2.addListener('click', () => {
                infoWindows.forEach(infoWindow => infoWindow.close());
                infoWindow2.open(map, marker2);
            });
        }

        // –î–æ–±–∞–≤–∏–ª–∏ –ø–æ–∫–∞–∑ –∏ —Å–æ–∫—Ä—ã—Ç–∏–µ –∏–Ω—Ñ–æ-–æ–∫–æ–Ω üí™.
        // –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ñ–æ-–æ–∫–Ω–∞–º: https://developers.google.com/maps/documentation/javascript/infowindows
        // –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ let –∏ const: https://learn.javascript.ru/var
        // TODO: –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç—É (–∏–∑ –º–∞—Å—Å–∏–≤–∞).

    </script>
</body>

</html>